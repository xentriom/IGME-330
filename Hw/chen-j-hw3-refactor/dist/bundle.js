(()=>{"use strict";var e,t,a,n,r,i,o,c,l,s=function(e,t,a,n){return void 0===n&&(n=1),"rgba(".concat(e,",").concat(t,",").concat(a,",").concat(n,")")},u=function(e){var t=e.sliderId,a=e.labelId,n=e.unit,r=e.setValueCallback,i=document.querySelector(t),o=document.querySelector(a);i.oninput=function(e){e.target&&(r(Number(e.target.value)),o.innerHTML="".concat(e.target.value," ").concat(n))},i.dispatchEvent(new Event("input"))},d=function(e){var t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(String(t).padStart(1,"0"),":").concat(String(a).padStart(2,"0"))};!function(e){e[e.GAIN=.5]="GAIN",e[e.NUM_SAMPLE=256]="NUM_SAMPLE"}(e||(e={})),function(e){e[e.BASS_FREQ=200]="BASS_FREQ",e[e.BASS_GAIN=6]="BASS_GAIN",e[e.TREBLE_FREQ=4e3]="TREBLE_FREQ",e[e.TREBLE_GAIN=4]="TREBLE_GAIN"}(t||(t={}));var h,f,p,v,m,y,b,g,w,S,E,A=function(e){n.src=e},I=function(e){c.frequency.setValueAtTime(e,a.currentTime)},T=function(e){c.gain.setValueAtTime(e,a.currentTime)},M=function(e){l.frequency.setValueAtTime(e,a.currentTime)},x=function(e){l.gain.setValueAtTime(e,a.currentTime)},q=function(){return n.duration},L=function(){function e(e,t,a,n,r){void 0===r&&(r=1),this.x=e,this.y=t,this.size=a,this.color=n,this.scale=r,this.velocity={x:2*Math.random()-1,y:2*Math.random()-1}}return e.prototype.update=function(e,t,a){var n=e.reduce((function(e,t){return e+t}),0)/(255*e.length);this.size=Math.max(100*n*this.scale,20),this.x+=this.velocity.x,this.y+=this.velocity.y,(this.x<0||this.x>t)&&(this.velocity.x*=-1),(this.y<0||this.y>a)&&(this.velocity.y*=-1)},e.prototype.draw=function(e){e.save(),e.fillStyle=this.color,e.beginPath(),e.arc(this.x,this.y,this.size*this.scale,0,2*Math.PI),e.fill(),e.restore()},e}(),k=function(){function e(e){this.image=e,this.rotationAngle=0,this.rotationInterval=null}return e.prototype.startRotation=function(){var e=this;if(!this.rotationInterval){var t=function(){e.rotationAngle-=1,e.image.style.transform="rotate(".concat(e.rotationAngle,"deg)"),e.rotationInterval=setTimeout(t,1e3/60)};t()}},e.prototype.stopRotation=function(){this.rotationInterval&&(clearTimeout(this.rotationInterval),this.rotationInterval=null),this.image.style.transform=""},e}();!function(e){e.SOUND_ONE="./assets/audio/Passing Memories.mp3"}(S||(S={})),function(e){e.PLAY="https://c.animaapp.com/fgpR59jS/img/svgexport-35--1--1@2x.png",e.PAUSE="https://c.animaapp.com/yPlj5CdF/img/svgexport-83-1.svg"}(E||(E={}));var P,C,N,R=function(e){for(var t=new Map,a=0,n=P.data;a<n.length;a++){var r=n[a],i=document.createElement("div");i.classList.add("box","tracks","track-info","mb-5"),i.dataset.name=r.name,i.dataset.path=r.path;var o=document.createElement("div");o.classList.add("media");var c=document.createElement("div");c.classList.add("media-left");var l=document.createElement("figure");l.classList.add("image","is-48x48");var s=document.createElement("img");s.classList.add("is-rounded"),s.src=r.image,l.appendChild(s),c.appendChild(l),o.appendChild(c);var u=new k(s);t.set(i,u);var d=document.createElement("div");d.classList.add("media-content");var h=document.createElement("h3");h.classList.add("title","is-size-6"),h.innerHTML=r.name,d.appendChild(h);var f=document.createElement("p");f.classList.add("subtitle","is-size-7"),f.innerHTML=r.author,d.appendChild(f),o.appendChild(d),i.appendChild(o),e.appendChild(i)}var p=t.values().next().value;null==p||p.startRotation();var v=document.querySelector("#btn-play").querySelector("img");e.onclick=function(e){var a=e.target.closest(".box");if(a){var n=a.dataset.path;n&&(A(n),t.forEach((function(e,t){t===a?e.startRotation():e.stopRotation()})),v.src=E.PAUSE)}}},B=function(e){var t=document.querySelector("#burger"),r=document.querySelector("#nav-links");t.addEventListener("click",(function(){r.classList.toggle("is-active")})),document.querySelector("#btn-fs").onclick=function(){var t;(t=e).requestFullscreen&&t.requestFullscreen()};var i=document.querySelector("#btn-play"),c=i.querySelector("img");i.onclick=function(e){var t=e.currentTarget;"suspended"===a.state&&a.resume(),"no"===t.dataset.playing?(n.play(),t.dataset.playing="yes",c.src=E.PLAY):(n.pause(),t.dataset.playing="no",c.src=E.PAUSE)};var l=document.querySelector("#slider-volume");l.oninput=function(e){var t,a=e.target;t=Number(a.value),o.gain.value=t},l.dispatchEvent(new Event("input")),u({sliderId:"#slider-bass-frequency",labelId:"#label-bass-frequency",unit:"Hz",setValueCallback:I}),u({sliderId:"#slider-bass-gain",labelId:"#label-bass-gain",unit:"dB",setValueCallback:T}),u({sliderId:"#slider-treble-frequency",labelId:"#label-treble-frequency",unit:"Hz",setValueCallback:M}),u({sliderId:"#slider-treble-gain",labelId:"#label-treble-gain",unit:"dB",setValueCallback:x}),[{id:"cb-visualizer",param:"visualizerType"},{id:"cb-sprites",param:"showSprites"},{id:"cb-gradient",param:"showGradient"},{id:"cb-bars",param:"showBars"},{id:"cb-circles",param:"showCircles"},{id:"cb-noise",param:"showNoise"},{id:"cb-invert",param:"showInvert"},{id:"cb-emboss",param:"showEmboss"}].forEach((function(e){var t=e.id,a=e.param,n=document.querySelector("#".concat(t));n.checked=P.drawParams[a],n.onchange=function(){P.drawParams[a]=n.checked}})),document.querySelector("#progress-bar").oninput=function(e){var t,a=e.target;t=q()*(Number(a.value)/100),n.currentTime=t}},G=function(){setTimeout(G,1e3/60),function(e){if(void 0===e&&(e={visualizerType:!1,showSprites:!1,showGradient:!1,showBars:!1,showCircles:!1,showNoise:!1,showInvert:!1,showEmboss:!1}),e.visualizerType?m.getByteFrequencyData(y):m.getByteTimeDomainData(y),h.save(),h.fillStyle="black",h.globalAlpha=.1,h.fillRect(0,0,f,p),h.restore(),e.showGradient&&(h.save(),h.fillStyle=v,h.globalAlpha=.8,h.fillRect(0,0,f,p),h.restore()),e.showBars){var t=(f-2*y.length-0)/y.length;h.save();var a=h.createLinearGradient(0,p,0,0);a.addColorStop(0,"rgba(255,255,255,0.85)"),a.addColorStop(1,"rgba(255,105,180,0.85)"),h.fillStyle=a,h.strokeStyle="rgba(0,0,0,0.15)",h.lineWidth=1.5,h.lineJoin="round";for(var n=0;n<y.length;n++){var r=Math.max(y[n]/255*p*.8,1),i=0+n*(t+2),o=p-r;h.fillRect(Math.floor(i),Math.floor(o),Math.ceil(t),Math.ceil(r)),h.strokeRect(Math.floor(i),Math.floor(o),Math.ceil(t),Math.ceil(r))}h.restore()}if(e.showCircles){var c=p/4,l=f/2,u=p/2;for(h.save(),h.globalAlpha=.5,n=0;n<y.length;n++){var d=void 0!==y[n]?y[n]/255:0,S=.05*Math.sin(Date.now()/300+n),E=Math.max((d+S)*c,0);h.beginPath(),h.fillStyle=s(255,150,150,.4-d/3),h.arc(l,u,E,0,2*Math.PI,!1),h.fill(),h.closePath(),h.beginPath(),h.fillStyle=s(135,206,250,.15-d/10),h.arc(l,u,Math.max(1.6*E+20*S,0),0,2*Math.PI,!1),h.fill(),h.closePath(),h.save(),h.beginPath(),h.fillStyle=s(255,255,100,.6-d/5),h.arc(l,u,Math.max(.5*E-10*S,0),0,2*Math.PI,!1),h.fill(),h.closePath(),h.restore()}h.restore()}e.showSprites&&(b.update(y,f,p),g.update(y,f,p),w.update(y,f,p),b.draw(h),g.draw(h),w.draw(h));var A=h.getImageData(0,0,f,p),I=A.data,T=I.length,M=A.width;for(n=0;n<T;n+=4)if(e.showNoise&&Math.random()<.05&&(I[n]=I[n+1]=I[n+2]=255),e.showInvert){var x=I[n],q=I[n+1],L=I[n+2];I[n]=255-x,I[n+1]=255-q,I[n+2]=255-L}if(e.showEmboss)for(n=0;n<T;n++)n%4!=3&&(I[n]=127+2*I[n]-I[n+4]-I[n+4*M]);h.putImageData(A,0,0)}(P.drawParams),_()},_=function(){var e=document.querySelector("#progress-bar"),t=document.querySelector("#progress-label"),a=n.currentTime,r=q();r>0&&(e.value=(a/r*100).toString(),t.innerHTML="".concat(d(a)," / ").concat(d(r)))};N=function(){var s;return function(e,t){var a,n,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=c(0),o.throw=c(1),o.return=c(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(l){return function(c){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{a=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(u){switch(u.label){case 0:return[4,(d=void 0,E=void 0,I=void 0,T=function(){return function(e,t){var a,n,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=c(0),o.throw=c(1),o.return=c(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(l){return function(c){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(a=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{a=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(e){switch(e.label){case 0:return[4,fetch("data/av-data.json")];case 1:return[4,e.sent().json()];case 2:return[2,P=e.sent()]}}))},new(I||(I=Promise))((function(e,t){function a(e){try{r(T.next(e))}catch(e){t(e)}}function n(e){try{r(T.throw(e))}catch(e){t(e)}}function r(t){var r;t.done?e(t.value):(r=t.value,r instanceof I?r:new I((function(e){e(r)}))).then(a,n)}r((T=T.apply(d,E||[])).next())})))];case 1:s=u.sent(),document.title=s.title;try{!function(){var s,u;s=S.SOUND_ONE,u=window.AudioContext,a=new u,n=new Audio,A(s),r=a.createMediaElementSource(n),(i=a.createAnalyser()).fftSize=e.NUM_SAMPLE,(o=a.createGain()).gain.value=e.GAIN,(c=a.createBiquadFilter()).type="lowshelf",c.frequency.setValueAtTime(t.BASS_FREQ,a.currentTime),c.gain.setValueAtTime(t.BASS_GAIN,a.currentTime),(l=a.createBiquadFilter()).type="highshelf",l.frequency.setValueAtTime(t.TREBLE_FREQ,a.currentTime),l.gain.setValueAtTime(t.TREBLE_GAIN,a.currentTime),r.connect(i),i.connect(c),c.connect(l),l.connect(o),o.connect(a.destination);var d=document.querySelector("canvas");B(d),function(e,t){h=e.getContext("2d"),f=e.width,p=e.height,v=function(e,t,a,n,r){for(var i=e.createLinearGradient(0,0,0,r),o=0,c=[{percent:0,color:"#b3e5fc"},{percent:.5,color:"#ce93d8"},{percent:1,color:"#fff59d"}];o<c.length;o++){var l=c[o];i.addColorStop(l.percent,l.color)}return i}(h,0,0,0,p),m=t,y=new Uint8Array(m.fftSize/2),b=new L(100,100,10,"rgba(255, 0, 0, 0.2)",1),g=new L(100,100,10,"rgba(0, 0, 255, 0.2)",.5),w=new L(100,100,10,"rgba(0, 255, 0, 0.2)",.25)}(d,i);var E=document.querySelector("#track-selection");R(E),G()}()}catch(e){}return[2]}var d,E,I,T}))},new((C=void 0)||(C=Promise))((function(e,t){function a(e){try{r(N.next(e))}catch(e){t(e)}}function n(e){try{r(N.throw(e))}catch(e){t(e)}}function r(t){var r;t.done?e(t.value):(r=t.value,r instanceof C?r:new C((function(e){e(r)}))).then(a,n)}r((N=N.apply(void 0,[])).next())}))})();
//# sourceMappingURL=bundle.js.map